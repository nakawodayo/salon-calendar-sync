# ドキュメント管理ガイドライン

AI駆動開発における各種ドキュメントの命名規則と作成ルールをまとめます。

---

## ディレクトリ構造

```
docs/ai-philosophy/
├── logs/              # 日次ログと要件ログ
├── research/          # 技術調査結果
├── design/            # 設計ドキュメント
├── README.md          # AI開発哲学の説明
├── PHASES.md          # フェーズ分離ガイドライン
├── REQUIREMENTS.md    # 要件ログ運用ガイド（Phase 1中心）
├── LOGGING.md         # ロギング規約
├── COLLABORATION.md   # コラボレーション規約
├── BRANCHING.md       # ブランチ戦略
└── DOCUMENTATION.md   # このファイル
```

---

## 1. 日次ログ（logs/）

### 目的
日々の開発活動、決定事項、コンテキストを記録し、後から振り返り可能にする。

### 命名規則
- ファイル名: `YYYY-MM-DD.md`
- 例: `2025-11-12.md`

### 作成タイミング
- 開発セッション開始時または終了時
- 重要な決定や合意があった時
- 技術的な発見や学びがあった時

### テンプレート

```markdown
# 日付: YYYY-MM-DD

## 実施内容

## 決定事項

## 学び・気づき

## 次のアクション

## 参考資料
```

---

## 2. 要件ログ（logs/）

### 目的
Phase 1（探索・試作）での要件定義の変遷を記録する。要件は変化が前提であり、履歴を残して「なぜ」を共有する。

### 命名規則
- ファイル名: `YYYY-MM-DD-phase1-requirements.md`
- 複数回に分ける場合: `YYYY-MM-DD-phase1-requirements-partN.md`
- 例: `2025-11-11-phase1-requirements.md`

### 作成タイミング
- 初回要件の叩き台を作った時
- 合意や前提が変わった時（重要）
- プロトタイプ検証で仮説が更新された時

### テンプレート

詳細は `REQUIREMENTS.md` を参照。基本構成:

```markdown
# 日付: YYYY-MM-DD

## 背景・課題
## ステークホルダー
## 目的（アウトカム）
## 要件（現時点）
## 制約・前提
## 成功指標（暫定）
## 決定事項
## リスク・論点
## オープンな質問
## 技術調査結果
## 設計ドキュメント
## 次の一歩（Phase 1）
```

---

## 3. 技術調査結果（research/）

### 目的
技術選定、API調査、ライブラリ比較などの技術的な調査結果を独立したドキュメントとして管理する。要件ログから参照されることで、要件ログを簡潔に保つ。

### 命名規則
- ファイル名: `<調査テーマ>.md`
- 例: `line-app-research.md`, `google-calendar-api-auth-flow.md`
- テーマは簡潔に（技術名、API名、ツール名など）
- **日付プレフィックスは不要**（作成日はドキュメント内に記載）

### 作成タイミング
- 技術選定のための調査を行った時
- APIやライブラリの仕様を確認した時
- 他選択肢との比較検討を行った時

### テンプレート

```markdown
# <調査テーマ> 調査結果

**作成日**: YYYY-MM-DD
**関連**: [関連する要件ログへのリンク](../logs/YYYY-MM-DD-phase1-requirements.md)

---

## 調査目的

## 調査結果

## 選択肢の比較

## 推奨事項（あれば）

## 参考リンク
```

### 運用ルール
- 技術調査結果は要件ログとは別ファイルとして管理し、要件ログからリンクで参照する
- 調査結果が要件や設計判断に影響する場合は、要件ログの「決定事項」や「リスク・論点」に反映する
- 調査結果の更新は、同じファイルを更新する（内容の大幅な変更があっても、ファイル名は変えず、更新履歴をドキュメント内に記載）

---

## 4. 設計ドキュメント（design/）

### 目的
アーキテクチャ、システム設計、技術方針などの設計決定を文書化する。Phase 2（本実装）への移行時の参照資料となる。

### 命名規則
- ファイル名: `<設計テーマ>.md`
- 例: `architecture-guidelines.md`, `mvp-plan.md`, `error-handling-retry.md`
- テーマは内容を明確に表すもの
- **日付プレフィックスは不要**（作成日はドキュメント内に記載）

### 作成タイミング
- アーキテクチャ方針を決定した時
- システム設計のたたき台を作った時
- 技術方針（エラーハンドリング、ロギング等）を決めた時
- MVPの範囲を定義した時

### テンプレート

```markdown
# <設計テーマ>

**作成日**: YYYY-MM-DD
**関連**: [関連する要件ログや調査結果へのリンク]

---

## 概要

## 背景・目的

## 設計方針

## 詳細設計

## 実装ガイドライン

## リスク・制約

## 参考資料
```

### 運用ルール
- 設計ドキュメントは要件ログから参照される
- 設計の変更は、同じファイルを更新する（ファイル名は変えず、更新履歴をドキュメント内に記載）
- Phase 2 移行時の重要な参照資料となるため、実装の意図と背景を明確に記載する

---

## 5. その他のドキュメント（ai-philosophy/直下）

### 説明

プロジェクト全体の哲学、ルール、ガイドラインを記載したドキュメント。

### ファイル一覧

- `README.md`: AI開発哲学の説明
- `PHASES.md`: フェーズ分離ガイドライン
- `REQUIREMENTS.md`: 要件ログ運用ガイド（Phase 1中心）
- `LOGGING.md`: ロギング規約
- `COLLABORATION.md`: コラボレーション規約
- `BRANCHING.md`: ブランチ戦略
- `DOCUMENTATION.md`: このファイル

### 運用ルール
- 哲学やルールに影響する変更は、コミット時に `[philosophy]` プレフィックスを付ける
- 変更履歴は Git で管理（ドキュメント内に更新履歴は不要）

---

## 全体の運用方針

### 1. 命名の一貫性

- **logs/**: 日付プレフィックス必須（`YYYY-MM-DD-*.md`）
- **research/** と **design/**: 日付プレフィックス不要（`<テーマ>.md`）
  - 作成日はドキュメント内の `**作成日**:` フィールドに記載
  - 更新履歴もドキュメント内に記載
- **ai-philosophy/直下**: 固定ファイル名（`README.md`, `PHASES.md` など）

### 2. ドキュメント間の参照

- Markdownのリンク形式で相互参照を行う
- 相対パスを使用（例: `../design/architecture-guidelines.md`）
- ファイル名変更時は全参照を更新する

### 3. 更新履歴の管理

- **logs/**: 基本的に作成後は更新せず、新しいファイルを作成
- **research/** と **design/**: 同じファイルを更新し、ドキュメント内に更新履歴セクションを追加
- **ai-philosophy/直下**: Git履歴で管理（ドキュメント内に更新履歴不要）

### 4. コミットメッセージ

- ドキュメント作成・更新時は `docs:` プレフィックス
- 哲学やルール変更時は `[philosophy]` プレフィックス

### 5. 簡潔性の維持

- ログは簡潔・構造化を優先（全文は不要、根拠は残す）
- 技術的な詳細は research/ や design/ に分離し、要件ログからリンクで参照
- 必要な情報のみを記載し、読みやすさを重視

---

## ファイル命名例

### 良い例

```
logs/2025-11-12.md
logs/2025-11-11-phase1-requirements.md
research/line-app-research.md
research/google-calendar-api-auth-flow.md
design/architecture-guidelines.md
design/mvp-plan.md
```

### 悪い例

```
logs/daily-log.md                              # 日付なし
research/2025-11-11-line-app-research.md       # 日付プレフィックス不要
design/2025-11-11-architecture-guidelines.md   # 日付プレフィックス不要
design/arch.md                                 # テーマが不明確
```

---

## まとめ

- **logs/**: 日付ベースで時系列管理
- **research/** と **design/**: テーマベースで内容管理、更新履歴はドキュメント内に記載
- ドキュメント間の相互参照を活用し、情報の重複を避ける
- 簡潔性と可読性を重視し、必要な情報のみを記載
