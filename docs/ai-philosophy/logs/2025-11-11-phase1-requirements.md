# 日付: 2025-11-11

## 背景・課題

長年お世話になっているフリーの美容師が、Google Calendar で予約を管理している。新規予約は口頭や LINE で受け、都度 Google Calendar に手入力しており負担が大きい。手入力の手間・漏れ・二重予約のリスクを低減したい。

## ステークホルダー

- 主要利用者: フリーの美容師（個人事業）
- エンドユーザー: お客さん（予約を行う人）
- 運用者/管理者: 美容師本人（暫定）

## 目的（アウトカム）

- 手入力作業をほぼゼロにする
- 予約漏れ・二重予約を防止する
- お客さんがアプリから予約し、即座に美容師の Google Calendar に予定が入る

## 要件（現時点）

- 機能要件
  - お客さんがアプリ（Web/モバイルは未定）から予約リクエストを送れる
  - 予約確定時に対象の Google Calendar に予定を自動作成
  - 二重予約の防止（空き枠の判定）
  - 予約内容（日時、メニュー、顧客名、連絡手段）を保存
  - 予約作成時に美容師へ通知（方法は後述検討）
- 非機能要件
  - シンプルな初期導入（Phase 1 は最小 UX で可）
  - タイムゾーン/営業時間の扱いを誤らないこと
  - 個人の Google アカウントで動作（Google Workspace は不要）

## 制約・前提

- Google Calendar API を使用（OAuth 2.0 認可が必要）
- 美容師の Google アカウントに対し、当アプリが予定作成権限を得る
- 初期は単一の美容師・単一カレンダーを対象（複数対応は Phase 2 以降）

## 成功指標（暫定）

- 手入力による予約登録回数が 90%以上削減
- 二重予約ゼロ
- 予約確定からカレンダー反映まで 3 秒以内（体感）

## リスク・論点

- 権限付与の UX（OAuth 同意とトークン継続運用）
- 同時刻リクエストによる競合（原子性の担保）
- 既存の LINE/口頭フローとの併存（移行期間の運用）
- タイムゾーン・祝日・営業時間の扱い

## オープンな質問

- 予約の承認フローは自動確定か、手動承認か？
- メニューや所要時間は固定か、可変か？
- 通知チャネルは何を使用するか（LINE/メール/プッシュ）？
- キャンセル・変更ポリシーは？

## 次の一歩（Phase 1）

- [ ] Google Calendar API の認可フロー最小動作確認（ローカル/テストカレンダー）
- [ ] 空き枠判定の設計スケッチ（所要時間・バッファの扱い）
- [ ] 最小 UI（日時選択 → 予約確定）プロトタイプを `prototypes/ui-sketches/` に作成
- [ ] カレンダー反映の最小 MVP を `prototypes/mvp/` に作成
