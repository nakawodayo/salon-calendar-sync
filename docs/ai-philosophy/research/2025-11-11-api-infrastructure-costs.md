# API/インフラサービスの利用コスト調査結果

**調査日**: 2025-11-11
**関連**: [Phase 1 要件定義](../logs/2025-11-11-phase1-requirements.md)

---

## 調査目的

自社開発（開発コストは考慮不要）で進めるため、API やインフラサービスの利用コスト（初期費用・運用コスト）を調査。基本的には無料または個人が出せる範囲で検討する。

---

## Google Calendar API

### 料金体系

- **基本料金**: **無料**
- **リクエスト制限**: リクエスト数に制限はあるが、上限を超えても追加料金は発生しない
- **詳細**: Google Calendar API は無料で利用可能。リクエスト数には制限があるが、上限を超えても追加料金は発生しない

### 注意点

- 具体的なリクエスト数の上限については、Google Cloud の公式ドキュメントで確認が必要
- OAuth 2.0 認可が必要（認可自体は無料）

### 参考リンク

- [Google Calendar API 公式ドキュメント](https://developers.google.com/workspace/calendar/api/guides/quota?hl=ja)

---

## LINE API

### LIFF アプリ

- **基本料金**: **無料**
- **詳細**: LIFF（LINE Front-end Framework）アプリの開発・利用自体は無料

### Messaging API

- **基本料金**: 無料枠あり（詳細は要確認）
- **注意点**: 具体的な無料枠の範囲や有料化のタイミングについては、LINE Developers の公式ドキュメントで確認が必要

### 参考リンク

- [LINE Developers 公式ドキュメント](https://developers.line.biz/ja/docs/)

---

## ホスティングサービス

### Vercel

- **無料プラン（Hobby）**: あり
- **主な制限**:
  - 帯域幅: 月間 100GB
  - 関数実行時間: 月間 100 時間
  - ビルド時間: 月間 6,000 分
  - エッジリクエスト: 月間 100 万回
- **特徴**:
  - Next.js の開発元であり、Next.js との統合が最強
  - GitHub 連携が強力（自動デプロイ、プレビュー環境）
  - グローバルエッジネットワーク（日本を含む各地域で低レイテンシー）
  - デプロイ速度が速い（特に Next.js プロジェクト）
  - サーバーレス関数、画像最適化、ISR（Incremental Static Regeneration）をサポート

### Netlify

- **無料プラン（Starter）**: あり
- **主な制限**:
  - 帯域幅: 月間 100GB
  - ビルド時間: 月間 300 分
  - 関数実行時間: 月間 125 時間
  - フォーム送信: 月間 100 回
  - カスタムドメイン: 100 個まで
- **特徴**:
  - 多様なフレームワークをサポート（Vue.js、React、Hugo、Gatsby など）
  - フォーム処理や CMS 統合が充実
  - 静的サイトの高速配信に特化
  - Git 統合、A/B テスト、認証機能を提供
  - Next.js もサポートするが、SSR 機能のサポートが限定的

---

## Vercel vs Netlify の比較

### 無料プランの比較

| 項目             | Vercel（Hobby） | Netlify（Starter）       |
| ---------------- | --------------- | ------------------------ |
| 帯域幅           | 月 100GB        | 月 100GB                 |
| ビルド時間       | 月 6,000 分     | 月 300 分                |
| 関数実行時間     | 月 100 時間     | 月 125 時間              |
| エッジリクエスト | 月 100 万回     | 無制限（静的リクエスト） |
| フォーム送信     | -               | 月 100 回                |
| カスタムドメイン | あり            | 100 個まで               |

### 機能面の比較

| 項目               | Vercel                           | Netlify                          |
| ------------------ | -------------------------------- | -------------------------------- |
| Next.js 統合       | 最強（開発元）                   | サポートあり（SSR は限定的）     |
| GitHub 連携        | 強力（自動デプロイ、プレビュー） | 強力（自動デプロイ）             |
| デプロイ速度       | 速い（特に Next.js）             | やや遅い                         |
| エッジネットワーク | 日本を含む各地域で低レイテンシー | あり（日本は無料プランでは制限） |
| フォーム処理       | なし                             | 充実                             |
| CMS 統合           | 限定的                           | 充実                             |
| サーバーレス関数   | あり                             | あり                             |
| 静的サイト配信     | 優秀                             | 優秀                             |

### 推奨: Vercel

**推奨理由（本プロジェクトの場合）:**

1. **GitHub 連携が強い**

   - 自動デプロイ、プレビュー環境の生成がスムーズ
   - プルリクエストごとに自動でプレビュー環境を構築

2. **Next.js との統合が最強**

   - Next.js の開発元であり、最新機能を最速でサポート
   - SSR、SSG、ISR などの機能を最高のパフォーマンスで実行

3. **デプロイ速度が速い**

   - 特に Next.js プロジェクトでは平均 12 秒でデプロイ完了
   - ビルドキャッシュが効いている場合は 8 秒まで短縮

4. **グローバルエッジネットワーク**

   - 日本を含む各地域で平均 50ms 以下のレスポンスタイム
   - LIFF アプリのユーザー体験向上に寄与

5. **ビルド時間が長い**
   - 無料プランで月 6,000 分（Netlify は 300 分）
   - 開発頻度が高い場合でも余裕がある

### Netlify が適している場合

- フォーム処理が必要な静的サイト
- CMS 統合が必要なプロジェクト
- Next.js 以外のフレームワークを主に使用する場合

### AWS Lambda

- **無料枠**: あり
- **主な内容**:
  - 毎月 100 万リクエストまで無料
  - 40 万 GB-秒のコンピューティング時間まで無料
- **注意点**: 無料枠を超えると従量課金が適用される
- **REST/GraphQL API 構築**: API Gateway と組み合わせて構築可能
- **Vercel との連携**: Vercel から外部 API として呼び出し可能

### GCP Cloud Functions

- **無料枠**: あり（Always Free 枠）
- **主な内容**:
  - 月間 200 万回の呼び出しまで無料
  - 月間 40 万 GB 秒のコンピューティング時間まで無料
  - 月間 5GB のアウトバウンドデータ転送まで無料
  - GCP 新規ユーザーには 300 ドル分の無料クレジット（最初の 12 か月間）
- **注意点**: 無料枠を超えると従量課金が適用される
- **REST/GraphQL API 構築**: HTTP トリガーで REST API を直接構築可能、GraphQL も実装可能
- **Vercel との連携**: Vercel から外部 API として呼び出し可能
- **Google Calendar API との連携**: 同じ GCP エコシステム内で認証情報の管理が統一でき、連携が容易

---

## AWS Lambda vs GCP Cloud Functions の比較

### 無料枠の比較

| 項目                   | AWS Lambda          | GCP Cloud Functions                   |
| ---------------------- | ------------------- | ------------------------------------- |
| 呼び出し回数           | 月 100 万回まで無料 | 月 200 万回まで無料                   |
| コンピューティング時間 | 40 万 GB-秒まで無料 | 40 万 GB 秒まで無料                   |
| データ転送             | -                   | 月 5GB まで無料                       |
| 新規ユーザー特典       | -                   | 300 ドル分の無料クレジット（12 か月） |

### 機能面の比較

| 項目                     | AWS Lambda                     | GCP Cloud Functions                    |
| ------------------------ | ------------------------------ | -------------------------------------- |
| REST API 構築            | API Gateway が必要             | HTTP トリガーで直接構築可能            |
| GraphQL API 構築         | 可能                           | 可能                                   |
| 言語サポート             | Node.js、Python、Go、Java など | Node.js、Python、Go など               |
| Google Calendar API 連携 | 外部 API として呼び出し        | 同じ GCP エコシステム内で連携が容易    |
| 認証情報管理             | AWS Secrets Manager など       | GCP のサービスアカウントで統一管理可能 |

### 推奨: GCP Cloud Functions

**推奨理由:**

1. **Google Calendar API との連携が容易**

   - 同じ GCP エコシステム内で認証情報を統一管理できる
   - OAuth 2.0 のトークン管理が GCP のサービスアカウントで一元化できる

2. **無料枠が大きい**

   - 呼び出し回数が Lambda の 2 倍（200 万回 vs 100 万回）
   - データ転送も 5GB まで無料

3. **REST API 構築が簡単**

   - HTTP トリガーで直接 REST API を構築可能
   - API Gateway のような追加サービスが不要

4. **Vercel との連携**

   - Vercel から外部 API として呼び出し可能
   - CORS 設定で簡単に連携できる

5. **開発のしやすさ**
   - GCP のコンソールや CLI ツールが充実
   - ローカル開発環境の構築も容易

### その他の選択肢

- **Heroku**: 無料プランあり（一定の時間内でアプリケーションを稼働可能）
- **リトルサーバー**: 月額 150 円から（共有ホスティング）
- **エックスサーバー**: 月額 990 円から（共有ホスティング）

---

## コスト見積もり（個人開発想定）

### 最小構成（無料枠内での運用）

- **Google Calendar API**: 無料
- **LINE API（LIFF）**: 無料
- **ホスティング**: Vercel または Netlify の無料プラン
- **データベース**: 不要（Google Calendar をデータソースとして使用）
- **合計**: **0 円/月**

### 注意点

- 無料枠の制限を超える可能性がある場合は、従量課金が発生する可能性がある
- 各サービスの無料枠の詳細は公式サイトで定期的に確認が必要
- 予期せぬコストを避けるため、使用状況を定期的にモニタリングすることを推奨

---

## 推奨構成（Phase 1）

1. **フロントエンド**: **Vercel** の無料プラン（GitHub 連携が強い）
2. **バックエンド**: **GCP Cloud Functions** の無料枠（REST/GraphQL API として構築）
3. **データベース**: 不要（Google Calendar をデータソースとして使用）
4. **API**: Google Calendar API（無料）、LINE API（無料）

**想定コスト**: **0 円/月**（無料枠内での運用が可能）

### 構成の詳細

- **フロントエンド（Vercel）**: LIFF アプリとして実装、GitHub と連携して自動デプロイ
- **バックエンド（GCP Cloud Functions）**: REST または GraphQL API として実装、Vercel から呼び出し
- **認証**: GCP のサービスアカウントで Google Calendar API の認証情報を管理
- **連携**: Vercel（フロントエンド）→ GCP Cloud Functions（バックエンド）→ Google Calendar API

---

## 参考リンク

- [Google Cloud 料金ページ](https://cloud.google.com/pricing)
- [AWS 料金ページ](https://aws.amazon.com/jp/pricing/)
- [Vercel 料金ページ](https://vercel.com/pricing)
- [Netlify 料金ページ](https://www.netlify.com/pricing/)
- [LINE Developers 公式ドキュメント](https://developers.line.biz/ja/docs/)

---

## 今後の確認事項

- [ ] Google Calendar API の具体的なリクエスト数上限の確認
- [ ] LINE Messaging API の無料枠の詳細確認
- [ ] Vercel/Netlify の無料プランの具体的な制限確認
- [ ] AWS Lambda/GCP Cloud Functions の無料枠の詳細確認
- [ ] データベースが必要になった場合の無料枠の検討（Firebase、Supabase など）
